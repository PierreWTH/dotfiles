{
  "version": 3,
  "sources": ["../src/search-kitty-tabs.tsx", "../src/utils/kitty-remote.ts", "../src/utils/components.tsx"],
  "sourcesContent": ["import { Action, ActionPanel, Icon, List, showToast, Toast, Clipboard } from \"@raycast/api\";\nimport { useState, useEffect } from \"react\";\nimport {\n  isKittyRunning,\n  isSocketAvailable,\n  listAll,\n  focusTab,\n  closeTab,\n  activateKitty,\n  classifyError,\n} from \"./utils/kitty-remote\";\nimport { SetupGuide } from \"./utils/components\";\nimport type { KittyOSWindow, KittyTab } from \"./utils/types\";\n\ninterface TabItem {\n  osWindowId: number;\n  tab: KittyTab;\n  cwd: string;\n  windowCount: number;\n  isFocused: boolean;\n}\n\nfunction flattenTabs(osWindows: KittyOSWindow[]): TabItem[] {\n  const items: TabItem[] = [];\n  for (const osWin of osWindows) {\n    for (const tab of osWin.tabs) {\n      const focusedWindow = tab.windows.find((w) => w.is_focused) || tab.windows[0];\n      items.push({\n        osWindowId: osWin.id,\n        tab,\n        cwd: focusedWindow?.cwd || \"\",\n        windowCount: tab.windows.length,\n        isFocused: osWin.is_focused && tab.is_focused,\n      });\n    }\n  }\n  return items;\n}\n\nexport default function Command() {\n  const [tabs, setTabs] = useState<TabItem[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showSetup, setShowSetup] = useState(false);\n\n  const loadTabs = async () => {\n    setIsLoading(true);\n    try {\n      if (!isKittyRunning()) {\n        setTabs([]);\n        setIsLoading(false);\n        await showToast({ style: Toast.Style.Failure, title: \"Kitty is not running\" });\n        return;\n      }\n      if (!isSocketAvailable()) {\n        setShowSetup(true);\n        setIsLoading(false);\n        return;\n      }\n      const osWindows = listAll();\n      setTabs(flattenTabs(osWindows));\n    } catch (error) {\n      const kind = classifyError(error);\n      if (kind === \"no_socket\" || kind === \"remote_disabled\") {\n        setShowSetup(true);\n      } else {\n        await showToast({ style: Toast.Style.Failure, title: \"Failed to list tabs\", message: String(error) });\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadTabs();\n  }, []);\n\n  if (showSetup) {\n    return <SetupGuide />;\n  }\n\n  return (\n    <List isLoading={isLoading} searchBarPlaceholder=\"Search Kitty tabs...\">\n      {tabs.length === 0 && !isLoading ? (\n        <List.EmptyView title=\"No tabs found\" description=\"Open a Kitty window first\" />\n      ) : (\n        tabs.map((item) => (\n          <List.Item\n            key={`${item.osWindowId}-${item.tab.id}`}\n            title={item.tab.title}\n            subtitle={item.cwd}\n            accessories={[\n              ...(item.windowCount > 1 ? [{ text: `${item.windowCount} panes` }] : []),\n              ...(item.isFocused ? [{ icon: Icon.Eye, tooltip: \"Focused\" }] : []),\n              { text: `Window ${item.osWindowId}` },\n            ]}\n            actions={\n              <ActionPanel>\n                <Action\n                  title=\"Focus Tab\"\n                  icon={Icon.Window}\n                  onAction={async () => {\n                    try {\n                      focusTab(item.tab.id);\n                      activateKitty();\n                    } catch (error) {\n                      await showToast({\n                        style: Toast.Style.Failure,\n                        title: \"Failed to focus tab\",\n                        message: String(error),\n                      });\n                    }\n                  }}\n                />\n                <Action.CopyToClipboard\n                  title=\"Copy Tab Title\"\n                  content={item.tab.title}\n                  shortcut={{ modifiers: [\"cmd\"], key: \"t\" }}\n                />\n                <Action\n                  title=\"Copy Working Directory\"\n                  icon={Icon.Clipboard}\n                  shortcut={{ modifiers: [\"cmd\", \"shift\"], key: \"c\" }}\n                  onAction={async () => {\n                    await Clipboard.copy(item.cwd);\n                    await showToast({ style: Toast.Style.Success, title: \"Copied\", message: item.cwd });\n                  }}\n                />\n                <Action\n                  title=\"Close Tab\"\n                  icon={Icon.Trash}\n                  style={Action.Style.Destructive}\n                  shortcut={{ modifiers: [\"cmd\", \"shift\"], key: \"backspace\" }}\n                  onAction={async () => {\n                    try {\n                      closeTab(item.tab.id);\n                      await loadTabs();\n                    } catch (error) {\n                      await showToast({\n                        style: Toast.Style.Failure,\n                        title: \"Failed to close tab\",\n                        message: String(error),\n                      });\n                    }\n                  }}\n                />\n                <Action\n                  title=\"Refresh\"\n                  icon={Icon.ArrowClockwise}\n                  shortcut={{ modifiers: [\"cmd\"], key: \"r\" }}\n                  onAction={loadTabs}\n                />\n              </ActionPanel>\n            }\n          />\n        ))\n      )}\n    </List>\n  );\n}\n", "import { execSync } from \"child_process\";\nimport { existsSync, readdirSync, statSync } from \"fs\";\nimport { getPreferenceValues } from \"@raycast/api\";\nimport type { KittyOSWindow } from \"./types\";\n\ninterface Preferences {\n  socketPath: string;\n}\n\nconst KITTEN_PATH = \"/Applications/kitty.app/Contents/MacOS/kitten\";\nconst TIMEOUT = 5000;\n\nfunction findKittySocket(): string | undefined {\n  try {\n    return readdirSync(\"/tmp\")\n      .filter((f) => f.startsWith(\"kitty-socket-\"))\n      .map((f) => `/tmp/${f}`)\n      .find((p) => statSync(p).isSocket());\n  } catch {\n    return undefined;\n  }\n}\n\nexport function getSocketPath(): string {\n  const { socketPath } = getPreferenceValues<Preferences>();\n  if (socketPath) return socketPath;\n  return findKittySocket() || \"/tmp/kitty-socket\";\n}\n\nexport function runKittenCommand(args: string[]): string {\n  const socket = getSocketPath();\n  const cmd = `${KITTEN_PATH} @ --to unix:${socket} ${args.join(\" \")}`;\n  return execSync(cmd, { encoding: \"utf-8\", timeout: TIMEOUT }).trim();\n}\n\nexport function isKittyRunning(): boolean {\n  try {\n    execSync(\"pgrep -x kitty\", { encoding: \"utf-8\", timeout: 3000 });\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport function isSocketAvailable(): boolean {\n  return existsSync(getSocketPath());\n}\n\nexport function activateKitty(): void {\n  execSync(`osascript -e 'tell application \"kitty\" to activate'`, { timeout: 3000 });\n}\n\nexport function launchKittyApp(args?: string[]): void {\n  const extra = args?.length ? ` --args ${args.join(\" \")}` : \"\";\n  execSync(`open -a kitty${extra}`, { timeout: 5000 });\n}\n\nexport async function ensureKittyRunning(): Promise<void> {\n  if (!isKittyRunning()) {\n    launchKittyApp();\n    // Wait for Kitty to start and create the socket\n    await new Promise<void>((resolve, reject) => {\n      let attempts = 0;\n      const interval = setInterval(() => {\n        attempts++;\n        if (isKittyRunning() && isSocketAvailable()) {\n          clearInterval(interval);\n          resolve();\n        } else if (attempts > 20) {\n          clearInterval(interval);\n          reject(new Error(\"Kitty did not start in time\"));\n        }\n      }, 250);\n    });\n  }\n}\n\nexport function launchWindow(opts?: { cwd?: string; title?: string }): number {\n  const args = [\"launch\", \"--type=os-window\"];\n  if (opts?.cwd) args.push(`--cwd=${opts.cwd}`);\n  if (opts?.title) args.push(`--title=${opts.title}`);\n  const result = runKittenCommand(args);\n  return parseInt(result, 10);\n}\n\nexport function launchTab(opts?: { cwd?: string; title?: string }): number {\n  const args = [\"launch\", \"--type=tab\"];\n  if (opts?.cwd) args.push(`--cwd=${opts.cwd}`);\n  if (opts?.title) args.push(`--tab-title=${opts.title}`);\n  const result = runKittenCommand(args);\n  return parseInt(result, 10);\n}\n\nexport function launchSplit(direction: \"vsplit\" | \"hsplit\", opts?: { cwd?: string }): number {\n  const args = [\"launch\", `--location=${direction}`];\n  if (opts?.cwd) args.push(`--cwd=${opts.cwd}`);\n  const result = runKittenCommand(args);\n  return parseInt(result, 10);\n}\n\nexport function listAll(): KittyOSWindow[] {\n  const result = runKittenCommand([\"ls\"]);\n  return JSON.parse(result) as KittyOSWindow[];\n}\n\nexport function focusTab(tabId: number): void {\n  runKittenCommand([\"focus-tab\", `--match=id:${tabId}`]);\n}\n\nexport function focusWindow(windowId: number): void {\n  runKittenCommand([\"focus-window\", `--match=id:${windowId}`]);\n}\n\nexport function sendText(windowId: number, text: string): void {\n  const escaped = text.replace(/'/g, \"'\\\\''\");\n  runKittenCommand([\"send-text\", `--match=id:${windowId}`, `'${escaped}\\n'`]);\n}\n\nexport function closeTab(tabId: number): void {\n  runKittenCommand([\"close-tab\", `--match=id:${tabId}`]);\n}\n\nexport function setTabTitle(tabId: number, title: string): void {\n  runKittenCommand([\"set-tab-title\", `--match=id:${tabId}`, title]);\n}\n\nexport function gotoLayout(layout: string): void {\n  runKittenCommand([\"goto-layout\", layout]);\n}\n\nexport type KittyError = \"not_running\" | \"no_socket\" | \"remote_disabled\" | \"timeout\" | \"unknown\";\n\nexport function classifyError(error: unknown): KittyError {\n  if (!isKittyRunning()) return \"not_running\";\n  if (!isSocketAvailable()) return \"no_socket\";\n\n  const msg = error instanceof Error ? error.message : String(error);\n  if (msg.includes(\"ETIMEDOUT\") || msg.includes(\"timed out\")) return \"timeout\";\n  if (msg.includes(\"Permission denied\") || msg.includes(\"remote control\")) return \"remote_disabled\";\n  return \"unknown\";\n}\n", "import { Detail } from \"@raycast/api\";\n\nconst SETUP_MARKDOWN = `\n# Kitty Remote Control Not Available\n\nTo use this extension, you need to enable Kitty's remote control via a Unix socket.\n\n## Setup Instructions\n\nAdd the following lines to your Kitty configuration file (\\`~/.config/kitty/kitty.conf\\`):\n\n\\`\\`\\`\nallow_remote_control socket-only\nlisten_on unix:/tmp/kitty-socket-{kitty_pid}\n\\`\\`\\`\n\nThen **restart Kitty** for the changes to take effect.\n\n## Verify\n\nAfter restarting, check that the socket exists:\n\n\\`\\`\\`bash\nls -la /tmp/kitty-socket-*\n\\`\\`\\`\n\nAnd test remote control:\n\n\\`\\`\\`bash\nkitten @ --to unix:/tmp/kitty-socket-$(pgrep -x kitty) ls\n\\`\\`\\`\n\n## Custom Socket Path\n\nThe extension auto-detects sockets matching \\`/tmp/kitty-socket-*\\`. If you use a different path, set it in the **Socket Path** preference.\n`;\n\nexport function SetupGuide() {\n  return <Detail markdown={SETUP_MARKDOWN} />;\n}\n"],
  "mappings": "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",
  "names": ["search_kitty_tabs_exports", "__export", "Command", "__toCommonJS", "import_api", "import_react", "import_child_process", "import_fs", "import_api", "KITTEN_PATH", "TIMEOUT", "findKittySocket", "f", "p", "getSocketPath", "socketPath", "runKittenCommand", "args", "socket", "cmd", "isKittyRunning", "isSocketAvailable", "activateKitty", "listAll", "result", "runKittenCommand", "focusTab", "tabId", "closeTab", "tabId", "runKittenCommand", "classifyError", "error", "isKittyRunning", "isSocketAvailable", "msg", "import_api", "import_jsx_runtime", "SETUP_MARKDOWN", "SetupGuide", "import_jsx_runtime", "flattenTabs", "osWindows", "items", "osWin", "tab", "focusedWindow", "w", "Command", "tabs", "setTabs", "isLoading", "setIsLoading", "showSetup", "setShowSetup", "loadTabs", "isKittyRunning", "isSocketAvailable", "listAll", "error", "kind", "classifyError", "SetupGuide", "item", "focusTab", "activateKitty", "closeTab"]
}
