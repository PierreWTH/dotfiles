{
  "version": 3,
  "sources": ["../src/new-kitty-window.ts", "../src/utils/kitty-remote.ts"],
  "sourcesContent": ["import { showToast, Toast, popToRoot } from \"@raycast/api\";\nimport {\n  isKittyRunning,\n  launchKittyApp,\n  launchWindow,\n  activateKitty,\n  isSocketAvailable,\n  classifyError,\n} from \"./utils/kitty-remote\";\n\nexport default async function command() {\n  try {\n    if (!isKittyRunning()) {\n      await showToast({ style: Toast.Style.Animated, title: \"Launching Kitty...\" });\n      launchKittyApp();\n      await popToRoot();\n      return;\n    }\n\n    if (!isSocketAvailable()) {\n      await showToast({\n        style: Toast.Style.Failure,\n        title: \"Socket not found\",\n        message: \"Configure listen_on in kitty.conf and restart Kitty\",\n      });\n      return;\n    }\n\n    launchWindow();\n    activateKitty();\n    await popToRoot();\n  } catch (error) {\n    const kind = classifyError(error);\n    await showToast({\n      style: Toast.Style.Failure,\n      title: \"Failed to open window\",\n      message: kind === \"no_socket\" ? \"Socket not found \u2014 check kitty.conf\" : String(error),\n    });\n  }\n}\n", "import { execSync } from \"child_process\";\nimport { existsSync, readdirSync, statSync } from \"fs\";\nimport { getPreferenceValues } from \"@raycast/api\";\nimport type { KittyOSWindow } from \"./types\";\n\ninterface Preferences {\n  socketPath: string;\n}\n\nconst KITTEN_PATH = \"/Applications/kitty.app/Contents/MacOS/kitten\";\nconst TIMEOUT = 5000;\n\nfunction findKittySocket(): string | undefined {\n  try {\n    return readdirSync(\"/tmp\")\n      .filter((f) => f.startsWith(\"kitty-socket-\"))\n      .map((f) => `/tmp/${f}`)\n      .find((p) => statSync(p).isSocket());\n  } catch {\n    return undefined;\n  }\n}\n\nexport function getSocketPath(): string {\n  const { socketPath } = getPreferenceValues<Preferences>();\n  if (socketPath) return socketPath;\n  return findKittySocket() || \"/tmp/kitty-socket\";\n}\n\nexport function runKittenCommand(args: string[]): string {\n  const socket = getSocketPath();\n  const cmd = `${KITTEN_PATH} @ --to unix:${socket} ${args.join(\" \")}`;\n  return execSync(cmd, { encoding: \"utf-8\", timeout: TIMEOUT }).trim();\n}\n\nexport function isKittyRunning(): boolean {\n  try {\n    execSync(\"pgrep -x kitty\", { encoding: \"utf-8\", timeout: 3000 });\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport function isSocketAvailable(): boolean {\n  return existsSync(getSocketPath());\n}\n\nexport function activateKitty(): void {\n  execSync(`osascript -e 'tell application \"kitty\" to activate'`, { timeout: 3000 });\n}\n\nexport function launchKittyApp(args?: string[]): void {\n  const extra = args?.length ? ` --args ${args.join(\" \")}` : \"\";\n  execSync(`open -a kitty${extra}`, { timeout: 5000 });\n}\n\nexport async function ensureKittyRunning(): Promise<void> {\n  if (!isKittyRunning()) {\n    launchKittyApp();\n    // Wait for Kitty to start and create the socket\n    await new Promise<void>((resolve, reject) => {\n      let attempts = 0;\n      const interval = setInterval(() => {\n        attempts++;\n        if (isKittyRunning() && isSocketAvailable()) {\n          clearInterval(interval);\n          resolve();\n        } else if (attempts > 20) {\n          clearInterval(interval);\n          reject(new Error(\"Kitty did not start in time\"));\n        }\n      }, 250);\n    });\n  }\n}\n\nexport function launchWindow(opts?: { cwd?: string; title?: string }): number {\n  const args = [\"launch\", \"--type=os-window\"];\n  if (opts?.cwd) args.push(`--cwd=${opts.cwd}`);\n  if (opts?.title) args.push(`--title=${opts.title}`);\n  const result = runKittenCommand(args);\n  return parseInt(result, 10);\n}\n\nexport function launchTab(opts?: { cwd?: string; title?: string }): number {\n  const args = [\"launch\", \"--type=tab\"];\n  if (opts?.cwd) args.push(`--cwd=${opts.cwd}`);\n  if (opts?.title) args.push(`--tab-title=${opts.title}`);\n  const result = runKittenCommand(args);\n  return parseInt(result, 10);\n}\n\nexport function launchSplit(direction: \"vsplit\" | \"hsplit\", opts?: { cwd?: string }): number {\n  const args = [\"launch\", `--location=${direction}`];\n  if (opts?.cwd) args.push(`--cwd=${opts.cwd}`);\n  const result = runKittenCommand(args);\n  return parseInt(result, 10);\n}\n\nexport function listAll(): KittyOSWindow[] {\n  const result = runKittenCommand([\"ls\"]);\n  return JSON.parse(result) as KittyOSWindow[];\n}\n\nexport function focusTab(tabId: number): void {\n  runKittenCommand([\"focus-tab\", `--match=id:${tabId}`]);\n}\n\nexport function focusWindow(windowId: number): void {\n  runKittenCommand([\"focus-window\", `--match=id:${windowId}`]);\n}\n\nexport function sendText(windowId: number, text: string): void {\n  const escaped = text.replace(/'/g, \"'\\\\''\");\n  runKittenCommand([\"send-text\", `--match=id:${windowId}`, `'${escaped}\\n'`]);\n}\n\nexport function closeTab(tabId: number): void {\n  runKittenCommand([\"close-tab\", `--match=id:${tabId}`]);\n}\n\nexport function setTabTitle(tabId: number, title: string): void {\n  runKittenCommand([\"set-tab-title\", `--match=id:${tabId}`, title]);\n}\n\nexport function gotoLayout(layout: string): void {\n  runKittenCommand([\"goto-layout\", layout]);\n}\n\nexport type KittyError = \"not_running\" | \"no_socket\" | \"remote_disabled\" | \"timeout\" | \"unknown\";\n\nexport function classifyError(error: unknown): KittyError {\n  if (!isKittyRunning()) return \"not_running\";\n  if (!isSocketAvailable()) return \"no_socket\";\n\n  const msg = error instanceof Error ? error.message : String(error);\n  if (msg.includes(\"ETIMEDOUT\") || msg.includes(\"timed out\")) return \"timeout\";\n  if (msg.includes(\"Permission denied\") || msg.includes(\"remote control\")) return \"remote_disabled\";\n  return \"unknown\";\n}\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA4C,wBCA5C,IAAAC,EAAyB,yBACzBC,EAAkD,cAClDC,EAAoC,wBAO9BC,EAAc,gDACdC,EAAU,IAEhB,SAASC,GAAsC,CAC7C,GAAI,CACF,SAAO,eAAY,MAAM,EACtB,OAAQC,GAAMA,EAAE,WAAW,eAAe,CAAC,EAC3C,IAAKA,GAAM,QAAQA,CAAC,EAAE,EACtB,KAAMC,MAAM,YAASA,CAAC,EAAE,SAAS,CAAC,CACvC,MAAQ,CACN,MACF,CACF,CAEO,SAASC,GAAwB,CACtC,GAAM,CAAE,WAAAC,CAAW,KAAI,uBAAiC,EACxD,OAAIA,GACGJ,EAAgB,GAAK,mBAC9B,CAEO,SAASK,EAAiBC,EAAwB,CACvD,IAAMC,EAASJ,EAAc,EACvBK,EAAM,GAAGV,CAAW,gBAAgBS,CAAM,IAAID,EAAK,KAAK,GAAG,CAAC,GAClE,SAAO,YAASE,EAAK,CAAE,SAAU,QAAS,QAAST,CAAQ,CAAC,EAAE,KAAK,CACrE,CAEO,SAASU,GAA0B,CACxC,GAAI,CACF,qBAAS,iBAAkB,CAAE,SAAU,QAAS,QAAS,GAAK,CAAC,EACxD,EACT,MAAQ,CACN,MAAO,EACT,CACF,CAEO,SAASC,GAA6B,CAC3C,SAAO,cAAWP,EAAc,CAAC,CACnC,CAEO,SAASQ,GAAsB,IACpC,YAAS,sDAAuD,CAAE,QAAS,GAAK,CAAC,CACnF,CAEO,SAASC,EAAeN,EAAuB,CACpD,IAAMO,EAAQP,GAAM,OAAS,WAAWA,EAAK,KAAK,GAAG,CAAC,GAAK,MAC3D,YAAS,gBAAgBO,CAAK,GAAI,CAAE,QAAS,GAAK,CAAC,CACrD,CAsBO,SAASC,EAAaC,EAAiD,CAC5E,IAAMC,EAAO,CAAC,SAAU,kBAAkB,EACtCD,GAAM,KAAKC,EAAK,KAAK,SAASD,EAAK,GAAG,EAAE,EACxCA,GAAM,OAAOC,EAAK,KAAK,WAAWD,EAAK,KAAK,EAAE,EAClD,IAAME,EAASC,EAAiBF,CAAI,EACpC,OAAO,SAASC,EAAQ,EAAE,CAC5B,CAiDO,SAASE,EAAcC,EAA4B,CACxD,GAAI,CAACC,EAAe,EAAG,MAAO,cAC9B,GAAI,CAACC,EAAkB,EAAG,MAAO,YAEjC,IAAMC,EAAMH,aAAiB,MAAQA,EAAM,QAAU,OAAOA,CAAK,EACjE,OAAIG,EAAI,SAAS,WAAW,GAAKA,EAAI,SAAS,WAAW,EAAU,UAC/DA,EAAI,SAAS,mBAAmB,GAAKA,EAAI,SAAS,gBAAgB,EAAU,kBACzE,SACT,CDlIA,eAAOC,GAAiC,CACtC,GAAI,CACF,GAAI,CAACC,EAAe,EAAG,CACrB,QAAM,aAAU,CAAE,MAAO,QAAM,MAAM,SAAU,MAAO,oBAAqB,CAAC,EAC5EC,EAAe,EACf,QAAM,aAAU,EAChB,MACF,CAEA,GAAI,CAACC,EAAkB,EAAG,CACxB,QAAM,aAAU,CACd,MAAO,QAAM,MAAM,QACnB,MAAO,mBACP,QAAS,qDACX,CAAC,EACD,MACF,CAEAC,EAAa,EACbC,EAAc,EACd,QAAM,aAAU,CAClB,OAASC,EAAO,CACd,IAAMC,EAAOC,EAAcF,CAAK,EAChC,QAAM,aAAU,CACd,MAAO,QAAM,MAAM,QACnB,MAAO,wBACP,QAASC,IAAS,YAAc,2CAAwC,OAAOD,CAAK,CACtF,CAAC,CACH,CACF",
  "names": ["new_kitty_window_exports", "__export", "command", "__toCommonJS", "import_api", "import_child_process", "import_fs", "import_api", "KITTEN_PATH", "TIMEOUT", "findKittySocket", "f", "p", "getSocketPath", "socketPath", "runKittenCommand", "args", "socket", "cmd", "isKittyRunning", "isSocketAvailable", "activateKitty", "launchKittyApp", "extra", "launchWindow", "opts", "args", "result", "runKittenCommand", "classifyError", "error", "isKittyRunning", "isSocketAvailable", "msg", "command", "isKittyRunning", "launchKittyApp", "isSocketAvailable", "launchWindow", "activateKitty", "error", "kind", "classifyError"]
}
